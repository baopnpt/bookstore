(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[16],{792:function(e,t,a){"use strict";a.r(t);var n=a(8),l=a.n(n),r=a(16),c=a(10),i=a(11),u=a(13),s=a(12),o=a(14),m=a(0),h=a.n(m),d=a(735),p=a(84),g=a(170),E=a(85),v=a(708),f=a(709),C=a(729),y=a(711),b=a(710),k=a(715),x=a(713),I=a(714),S=a(716),O=a(717),N=a(15),j=a(783),D=a(780),P=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"onDragEnd",value:function(e){var t=N.a.reorder(this.props.items,e.source.index,e.destination.index),a=this.props.activeIndex,n=[e.source.index,e.destination.index,a].sort();a===e.source.index?a=e.destination.index:n[1]===a&&(a>e.source.index?a--:a++),this.props.onChange&&this.props.onChange({items:t,activeIndex:a})}},{key:"render",value:function(){var e=this;return this.props.items?h.a.createElement("div",{className:"orderable-list"},h.a.createElement(D.a,{onDragEnd:this.onDragEnd.bind(this)},h.a.createElement(D.c,{droppableId:"droppable"},(function(t,a){return h.a.createElement("div",{ref:t.innerRef},h.a.createElement("div",{className:"item header"},e.props.name,e.props.headerButtons?e.props.headerButtons():null),e.props.items.map((function(t,a){return h.a.createElement(D.b,{key:a,draggableId:"item-".concat(a),index:a},(function(n,l){return h.a.createElement("div",Object.assign({ref:n.innerRef},n.draggableProps,n.dragHandleProps),e.props.renderItem?e.props.renderItem(t,a):null)}))})),t.placeholder)})))):h.a.createElement("p",null,"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u")}}]),t}(m.Component),w=a(24),T=a.n(w),A=["number","string"],q=function(e){function t(e){var a;Object(c.a)(this,t),a=Object(u.a)(this,Object(s.a)(t).call(this,e));var n="string";return e.value&&e.value.length>0&&(n=typeof e.value[0]),a.state={type:n,data:e.value||[]},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t="string";e.value&&e.value.length>0&&(t=typeof e.value[0]),this.setState({data:e.value||[],type:t})}},{key:"fixData",value:function(e,t){return"number"===t?e&&e.map((function(e){return e.value=Number(e.value)})):e&&e.map((function(e){return e.value=e.value+""})),this.props.onchange&&this.props.onChange(e),e}},{key:"addItem",value:function(){var e=T.a.clone(this.state.data),t="number"===this.state.type?0:"";e.push({key:"",value:t}),this.setState({data:e})}},{key:"removeItem",value:function(e){var t=T.a.clone(this.state.data);t.splice(e,1),this.setState({data:t}),this.props.onChange&&this.props.onChange(this.fixData(t,this.state.type))}},{key:"onItemDataChange",value:function(e,t,a){var n=T.a.clone(this.state.data),l=n[e];l[t]=a,n[e]=l,this.setState({data:n}),this.props.onChange&&this.props.onChange(this.fixData(n,this.state.type))}},{key:"render",value:function(){var e=this;return h.a.createElement("div",null,h.a.createElement(g.a,null,h.a.createElement(E.a,{md:8},h.a.createElement(b.a,{type:"select",onChange:function(t){e.setState({type:t.target.value})}},A.map((function(e,t){return h.a.createElement("option",{key:e,value:e},e)})))),h.a.createElement(E.a,{md:4},h.a.createElement(p.a,{block:!0,onClick:this.addItem.bind(this)},h.a.createElement("i",{className:"fa fa-plus"})," Th\xeam"))),this.state.data.map((function(t,a){return h.a.createElement(g.a,{className:"mt-1",key:a},h.a.createElement(E.a,{xs:4},h.a.createElement(b.a,{type:"text",value:t.key,placeholder:"Kho\u0301a",onChange:function(t){e.onItemDataChange(a,"key",t.target.value)}})),h.a.createElement(E.a,{xs:4},h.a.createElement(b.a,{type:"text",value:t.value,placeholder:"Gia\u0301 tri\u0323",onChange:function(t){e.onItemDataChange(a,"value",t.target.value)}})),h.a.createElement(E.a,{xs:4},h.a.createElement(p.a,{block:!0,color:"danger",onClick:function(t){e.removeItem(a)}},h.a.createElement("i",{className:"fa fa-remove"})," X\xf3a")))})))}}]),t}(m.Component),M=a(232),W=["GET","POST","PUT","PATCH","DELETE"],F=["create","update","find"],R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={apis:a.props.apis,currentAPI:null,currentIndex:0,error:null},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({apis:e.apis})}},{key:"onPropertyClick",value:function(e){this.setState({pIndex:e})}},{key:"addItem",value:function(){var e=this.props.data.splice(0);e.push({}),this.onChange(e)}},{key:"onChange",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"onAPIDataChange",value:function(e,t){var a=this.props.data;a[this.state.currentIndex][[e]]=t,this.setState({apis:a})}},{key:"deleteProperty",value:function(){var e=this.props.data.splice(0);e.splice(this.state.currentIndex,1);var t=this.state.currentIndex;--t<0&&(t=0),this.setState({currentIndex:t}),this.onChange(e)}},{key:"render",value:function(){var e=this,t=this.props.data[this.state.currentIndex];return h.a.createElement("div",null,h.a.createElement(E.a,{md:12},h.a.createElement("h5",{className:"card-title mb-0"},"API",this.props.onSave?h.a.createElement(p.a,{className:"pull-right",type:"submit",size:"md",onClick:this.save.bind(this)},h.a.createElement("i",{className:"fa fa-pencil"})," X\xe1c nh\u1eadn"):null),h.a.createElement("div",{className:"small text-muted"},"Qu\u1ea3n l\xfd API")),h.a.createElement(g.a,{className:"mt-1"},h.a.createElement(E.a,{md:2},h.a.createElement(P,{name:"API",items:this.props.data,renderItem:function(t,a){return h.a.createElement("div",{className:e.state.currentIndex===a?"item active":"item",onClick:function(){return e.setState({currentIndex:a})}},h.a.createElement("div",null,t.name||"Ch\u01b0a \u0111\u1eb7t t\xean",e.state.currentIndex===a?h.a.createElement("i",{className:"fa fa-pencil pull-right"}):null),h.a.createElement("span",{className:"small text-muted"},t.url))},activeIndex:this.state.currentIndex,onChange:function(t){var a=t.items.splice(0);e.onChange(a),e.setState({currentIndex:t.activeIndex}),e.setState({apis:t.items,currentIndex:t.activeIndex})},headerButtons:function(){return h.a.createElement(p.a,{color:"default",className:"pull-right",onClick:e.addItem.bind(e)},h.a.createElement("i",{className:"fa fa-plus"}))}})),h.a.createElement(E.a,{md:10},t?h.a.createElement(j.a,{hover:!0,className:"table-outline table-properties"},h.a.createElement("thead",{className:"thead-light"},h.a.createElement("tr",null,h.a.createElement("th",{colSpan:2},"Thu\u1ed9c t\xednh",h.a.createElement(p.a,{color:"danger",className:"pull-right",onClick:this.deleteProperty.bind(this)},h.a.createElement("i",{className:"fa fa-remove"})," X\xf3a")))),h.a.createElement("tbody",null,h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"T\xean")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.name||"",type:"text",placeholder:"Ti\xeau \u0111\u1ec1",required:!0,onChange:function(t){e.onAPIDataChange("name",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Ki\u1ec3u")),h.a.createElement("td",null,h.a.createElement(b.a,{type:"select",value:t.type||"",onChange:function(t){e.onAPIDataChange("type",t.target.value)}},h.a.createElement("option",{key:-1,value:""},"Ch\u01b0a ch\u1ecdn"),F.map((function(e,t){return h.a.createElement("option",{key:e,value:e},e)}))))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Url")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.url||"",type:"text",required:!0,onChange:function(t){e.onAPIDataChange("url",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Ph\xe2n quy\u1ec1n")),h.a.createElement("td",null,h.a.createElement(M.a.ArrayModel,{schema:{pageId:4,modelSelectMultiple:!0,modelSelectField:"id,name",api:"find_role"},value:t.roles||[],onChange:function(t){e.onAPIDataChange("roles",t)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"T\xf9y ch\u1ecdn g\u1eedi l\xean")),h.a.createElement("td",null,h.a.createElement(q,{value:t.options||[],onChange:function(t){e.onAPIDataChange("options",t)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"T\xf9y ch\u1ecdn c\u1eadp nh\u1eadt")),h.a.createElement("td",null,h.a.createElement(q,{value:t.criterias||"",onChange:function(t){e.onAPIDataChange("criterias",t)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"D\u1eef li\u1ec7u g\u1eedi l\xean")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.requestFields||"",type:"text",required:!0,onChange:function(t){e.onAPIDataChange("requestFields",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"D\u1eef li\u1ec7u tr\u1ea3 v\u1ec1")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.responseFields||"",type:"text",required:!0,onChange:function(t){e.onAPIDataChange("responseFields",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Ph\u01b0\u01a1ng th\u1ee9c http")),h.a.createElement("td",null,h.a.createElement(b.a,{type:"select",value:t.method||"",onChange:function(t){e.onAPIDataChange("method",t.target.value)}},h.a.createElement("option",{key:-1,value:""},"Ch\u01b0a ch\u1ecdn"),W.map((function(e,t){return h.a.createElement("option",{key:e,value:e},e)}))))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Xu\u1ea5t b\xe1o c\xe1o")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.downloadReport||"",type:"text",required:!0,onChange:function(t){e.onAPIDataChange("downloadReport",t.target.value)}}))))):null)))}}]),t}(m.Component),z=a(51),H=a(732),B=a(725),G=a(726),X=a(727),L=a(120),K=a(723),Q=a(724),J=a(25),U=function(e){function t(e){var a;return Object(c.a)(this,t),a=Object(u.a)(this,Object(s.a)(t).call(this,e)),null!==e.value&&void 0!==e.value||e.onChange&&e.onChange(!1),a.state={checked:!!e.value},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){this.setState({checked:e}),this.props.onChange&&this.props.onChange(e)}},{key:"componentWillReceiveProps",value:function(e){this.setState({checked:e.value})}},{key:"render",value:function(){var e=this;return h.a.createElement("div",null,h.a.createElement(J.k,{color:"success",disabled:this.props.disabled,onChange:function(t){e.onChange(!e.state.checked)},checked:this.state.checked}))}}]),t}(m.Component),V=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).itemsPerPage=10,a.pageInfo=null,a.state={modal:!1,data:[],loading:!0,search:"",pageId:e.schema.pageId,schema:e.schema,count:0,columns:a.calculateColumns(e.schema),output:T.a.clone(e.value)||"",nPages:0,display:null,mode:"select"},a.init(e.schema.pageId,e),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.output||[],a=e.value||[];T.a.isArray(a)||(a=[a]),(e.schema.modelSelectMultiple?!T.a.isEqual(t.sort(),a.sort()):t!==a)&&(this.setState({output:T.a.clone(a)}),this.fetchItemName(this.pageInfo,this.state.schema,T.a.clone(a)))}},{key:"init",value:function(){var e=Object(r.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.getPage(t);case 2:this.pageInfo=e.sent,this.fetchItemName(this.pageInfo,a.schema,T.a.clone(a.value));case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"toggle",value:function(e){this.setState({mode:e,modal:!this.state.modal})}},{key:"fetchData",value:function(){var e=Object(r.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n=null,t.filtered&&t.filtered.map((function(e){switch(e.id){case"id":a.id=Number(e.value)||0;break;default:a[e.id]={contains:e.value}}return null})),t&&t.sorted&&(n=[],t.sorted.map((function(e){return n.push(Object(z.a)({},e.id,e.desc?"desc":"asc")),null}))),"view"===this.state.mode&&(a.id?this.state.schema.modelSelectMultiple?T.a.includes(this.state.output,a.id)||(a.id=0):a.id!==this.state.output&&(a.id=0):a.id=this.state.output),e.next=6,N.a.callPageApi(this.pageInfo,this.state.schema.api,{sort:n,queryInput:JSON.stringify(a),limit:t.pageSize,skip:t.pageSize*t.page});case 6:(r=e.sent).data=this.calculateCheck(r.data,this.state.schema,this.state.output),this.setState({data:r.data,count:r.count,loading:!1,nPage:Math.ceil(r.count/t.pageSize)});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchItemName",value:function(){var e=Object(r.a)(l.a.mark((function e(t,a,n){var r,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a&&n){e.next=2;break}return e.abrupt("return");case 2:return r={},a.modelSelectMultiple,r.id=n,e.next=6,N.a.callPageApi(t,a.api,{queryInput:JSON.stringify(r)});case 6:c=e.sent,a.modelSelectMultiple?(i=[],c.data.map((function(e){return i.push(e.name)})),this.setState({display:T.a.join(i,"-")})):this.setState({display:c.data[0]?c.data[0].name:""});case 8:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"calculateCheck",value:function(e,t,a){var n=[];return n="array"===t.type?[a]:a,e.map((function(e){return T.a.includes(n,e.id)?e.checked=!0:e.checked=!1})),e}},{key:"onCheckboxChanged",value:function(e,t){var a=this.state.output;if(this.state.schema.modelSelectMultiple)if(Array.isArray(a)||(a=[]),t)T.a.includes(a,e.row.id)||a.push(e.row.id);else{var n=[];a.map((function(t){return t!==e.row.id&&n.push(t),null})),a=n}else a=t?e.row.id:null;console.log("output",a);var l=this.calculateCheck(this.state.data,this.state.schema,a);this.setState({data:l,output:a})}},{key:"calculateColumns",value:function(e){var t=this,a=[];return e.modelSelectField.split(",").map((function(e){var t=e.split("$$");return a.push({Header:t[1]||e,accessor:t[0]}),null})),a.push({Header:"Ch\u1ecdn",accessor:"checked",filterable:!1,Cell:function(e){for(var a=!1,n=0;n<t.state.data.length;n++)t.state.data[n].id===e.row.id&&(a=t.state.data[n].checked||!1);return h.a.createElement("div",null,"select"===t.state.mode?h.a.createElement(U,{value:a,onChange:function(a){t.onCheckboxChanged(e,a)}}):null)}}),a}},{key:"confirm",value:function(){this.props.onChange&&this.props.onChange(this.state.output),this.toggle()}},{key:"render",value:function(){var e=this;return h.a.createElement("div",null,h.a.createElement(K.a,{onClick:function(){e.toggle("select")}},h.a.createElement(b.a,{type:"text",disabled:!0,value:this.state.display||this.state.output}),h.a.createElement(Q.a,{addonType:"append"},h.a.createElement(p.a,{disabled:this.props.disabled,type:"button",color:"primary"},"Ch\u1ecdn..."))),h.a.createElement(H.a,{isOpen:this.state.modal,fade:!1,size:"lg"},h.a.createElement(B.a,null,"Ch\u1ecdn"),h.a.createElement(G.a,null,h.a.createElement(L.a,{previousText:"Trang tr\u01b0\u1edbc",nextText:"Trang sau",pageText:"Trang",rowsText:"b\u1ea3n ghi",ofText:"tr\xean t\u1ed5ng s\u1ed1",data:this.state.data,loading:this.state.loading,manual:!0,filterable:!0,onFetchData:this.fetchData.bind(this),pages:this.state.nPage,columns:this.state.columns,defaultPageSize:this.itemsPerPage,className:"-striped -highlight"})),h.a.createElement(X.a,null,"select"===this.state.mode?h.a.createElement(h.a.Fragment,null,h.a.createElement(p.a,{color:"primary mr-1",onClick:this.confirm.bind(this)},"X\xe1c nh\u1eadn"),h.a.createElement(p.a,{color:"secondary",onClick:this.toggle.bind(this)},"H\u1ee7y b\u1ecf")):h.a.createElement(p.a,{color:"secondary",onClick:this.toggle.bind(this)},"\u0110\xf3ng"))))}}]),t}(m.Component),$=a(72),_=a.n($),Z=a(36),Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={schema:e.schema,width:e.schema.imageWidth,height:e.schema.imageHeight},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"uploadFile",value:function(){var e=Object(r.a)(l.a.mark((function e(t){var a,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("images",t),n={},r="",this.state.width&&this.state.height?(n.width=this.state.width,n.height=this.state.height,n.isToJPG=1,r="/api/file/upload-image?".concat(_.a.stringify(n))):r="/api/file/upload-image",e.next=7,Z.a.upload(r,a);case 7:c=e.sent,this.props.onChange&&this.props.onChange(c.created[0].url);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return h.a.createElement("div",null,this.props.value?h.a.createElement("img",{src:this.props.value,className:"file-picker-thumbnail",alt:"H\xecnh \u1ea3nh"}):null,h.a.createElement(b.a,{type:"file",disabled:this.props.disabled,onChange:function(t){e.uploadFile(t.target.files[0])}}))}}]),t}(m.Component),ee=a(237),te=a.n(ee),ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={value:!e.value},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"handleEditorChange",value:function(e){console.log(e.target.getContent());var t=e.target.getContent();this.setState({value:t}),this.props.onChange&&this.props.onChange(t)}},{key:"componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"render",value:function(){return h.a.createElement("div",null,h.a.createElement(te.a,{content:this.props.value,config:{readonly:this.props.disabled,plugins:"autolink link image lists print preview",toolbar:"undo redo | bold italic | alignleft aligncenter alignright"},onChange:this.handleEditorChange.bind(this)}))}}]),t}(m.Component),ne=a(153),le=a.n(ne),re=a(48),ce=a.n(re),ie=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={schema:e.schema,value:e.value?ce()(e.value).toDate():new Date,focus:!1},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){this.setState({value:e}),this.props.onChange&&(e?this.props.onChange(e.valueOf()):this.props.onChange(e))}},{key:"componentWillReceiveProps",value:function(e){e.value!==ce()(this.state.value).valueOf()&&this.setState({value:e.value?ce()(e.value).toDate():new Date})}},{key:"render",value:function(){var e=this;return h.a.createElement("div",null,h.a.createElement(le.a,{selected:this.state.value,onChange:function(t){e.onChange(t)},className:"form-control full-width",dateFormat:"yyyy-MM-dd",disabled:this.state.schema.disabled}))}}]),t}(m.Component),ue=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={width:e.width,height:e.height},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"uploadFile",value:function(){var e=Object(r.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new FormData).append("files",t),e.next=5,Z.a.upload("/api/file/upload-file",a);case 5:n=e.sent,this.props.onChange&&this.props.onChange(n.created[0].id),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),N.a.alert(e.t0.message);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return h.a.createElement("div",null,h.a.createElement(b.a,{type:"file",disabled:this.props.disabled,onChange:function(t){e.uploadFile(t.target.files[0])}}))}}]),t}(m.Component),se=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return h.a.createElement(b.a,{type:"select",value:this.props.value,onChange:function(t){e.props.onChange&&e.props.onChange(t.target.value)}},h.a.createElement("option",{key:-1,value:null},"Ch\u01b0a ch\u1ecdn"),this.props.schema.items.map((function(e,t){return h.a.createElement("option",{key:e.value,value:e.value},e.key)})))}}]),t}(m.Component),oe=function(e){function t(e){var a;return Object(c.a)(this,t),a=Object(u.a)(this,Object(s.a)(t).call(this,e)),console.log("props",e),a.state={schema:e.schema,width:e.schema.imageWidth,height:e.schema.imageHeight},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"addImage",value:function(){if(this.props.onAddClick)return console.log("on add click"),this.props.onAddClick();var e=T.a.clone(this.props.value)||[];e.push(""),this.props.onChange&&this.props.onChange(e)}},{key:"removeImage",value:function(e){var t=T.a.clone(this.props.value)||[];t.splice(e,1),this.props.onChange&&this.props.onChange(t)}},{key:"render",value:function(){var e=this;return console.log(this.props.value),h.a.createElement("div",null,(this.props.value||[]).map((function(t,a){return h.a.createElement("div",{className:"single-image-container"},h.a.createElement(Y,{value:t,key:a,schema:e.props.schema,onChange:function(t){var n=T.a.clone(e.props.value)||[];n[a]=t,e.props.onChange&&e.props.onChange(n)}}),h.a.createElement(p.a,{className:"btn-remove-image",color:"danger",onClick:function(){e.removeImage(a)}},h.a.createElement("i",{className:"fa fa-remove"})))})),h.a.createElement(p.a,{color:"primary",type:"button",onClick:function(){e.addImage()}},h.a.createElement("i",{className:"fa fa-plus"})," Th\xeam \u1ea3nh"))}}]),t}(m.Component),me=a(119),he=a(348).SearchBox,de=Object(me.withScriptjs)(Object(me.withGoogleMap)((function(e){return h.a.createElement(me.GoogleMap,{defaultZoom:16,defaultCenter:{lat:e.lat,lng:e.lng}},h.a.createElement(me.Marker,{position:{lat:e.lat,lng:e.lng},draggable:!0,onDragEnd:function(t){if(e.onChange){var a="".concat(t.latLng.lat(),"/").concat(t.latLng.lng());e.onChange(a)}}}),h.a.createElement(he,{ref:e.onSearchBoxMounted,bounds:e.bounds,controlPosition:window.google.maps.ControlPosition.TOP_LEFT},h.a.createElement("input",{type:"text",placeholder:"T\xecm ki\u1ebfm \u0111\u1ecba ch\u1ec9",style:{boxSizing:"border-box",border:"1px solid transparent",width:"500px",height:"32px",marginTop:"8px",padding:"0 12px",borderRadius:"3px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)",fontSize:"14px",outline:"none",textOverflow:"ellipses"}})))}))),pe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={value:e.value},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=[21.0575491,105.7909262];return this.props.value&&((t=this.props.value.split("/"))[0]=Number(t[0]),t[1]=Number(t[1])),h.a.createElement("div",null,h.a.createElement(K.a,null,h.a.createElement(b.a,{type:"text",id:"name",placeholder:"Nh\u1eadp \u0111\u1ecba ch\u1ec9 gps. V\xed d\u1ee5: 21.0575491/105.7909262",required:!0,value:this.props.value,onChange:function(t){e.props.onChange&&e.props.onChange(t.target.value)}}),h.a.createElement(Q.a,{addonType:"append"},h.a.createElement(p.a,{type:"button",color:"default"},"Nh\u1eadp v\u1ecb tr\xed"))),h.a.createElement("div",{style:{marginTop:"15px"}},h.a.createElement(de,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyBoV6apMMKQdcDyFhg3L4XZAHCB3eCATg4&v=3.exp&libraries=geometry,drawing,places",loadingElement:h.a.createElement("div",{style:{height:"100%"}}),containerElement:h.a.createElement("div",{style:{height:"400px"}}),mapElement:h.a.createElement("div",{style:{height:"100%"}}),lat:t[0],lng:t[1],onChange:function(t){e.props.onChange&&e.props.onChange(t)}})))}}]),t}(m.Component),ge=a(728),Ee={ArrayFieldTemplate:function(e){switch(e.uiSchema["ui:widget"]){case"ImageWidget":return h.a.createElement("div",null,(e.formData||[]).map((function(t,a){return h.a.createElement("div",{key:a,className:"single-image-container"},h.a.createElement(Ee.ImageWidget,{value:t,schema:e.schema,onChange:function(t){e.items[a].children.props.onChange(t)}}),h.a.createElement(p.a,{className:"btn-remove-image",color:"danger",onClick:e.items[a].onDropIndexClick(e.items[a].index)},h.a.createElement("i",{className:"fa fa-remove"})))})),h.a.createElement(p.a,{onClick:e.onAddClick,color:"primary"},h.a.createElement("i",{className:"fa fa-plus"})));case"ModelSelectWidget":return h.a.createElement(Ee.ArrayModelSelect,{value:e.formData||[],schema:e.schema,onItemAdded:function(t){e.onAddClick({preventDefault:function(){},target:{value:t}})},onItemGetValue:function(t){e.items[e.items.length-1].children.props.onChange(t)},onItemRemoved:function(t){for(var a=0,n=0;n<e.formData.length;n++)if(e.formData[n]===t){a=n;break}e.items[a].onDropIndexClick(e.items[a].index)()},onChange:function(e){}});default:return null}},ArrayModelSelect:function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).itemsPerPage=10,a.pageInfo=null,a.state={modal:!1,data:[],loading:!0,search:"",pageId:e.schema.pageId,schema:e.schema,count:0,columns:a.calculateColumns(e.schema),output:T.a.clone(e.value||[]),nPages:0,display:null,mode:"select",names:[]},a.init(e.schema.pageId,e),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.output||[],a=e.value||[];T.a.isArray(a)||(a=[a]),t=t.filter((function(e){return null!=e})),a=a.filter((function(e){return null!=e})),!T.a.isEqual(t.sort(),a.sort())&&(this.setState({output:T.a.clone(a),modal:!1}),this.fetchItemName(this.pageInfo,this.state.schema,T.a.clone(a)))}},{key:"init",value:function(){var e=Object(r.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.getPage(t);case 2:this.pageInfo=e.sent,this.fetchItemName(this.pageInfo,a.schema,T.a.clone(a.value));case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"toggle",value:function(e){this.props.onItemRemoved&&this.props.onItemRemoved(void 0),this.setState({mode:e,modal:!this.state.modal})}},{key:"fetchData",value:function(){var e=Object(r.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n=null,t.filtered&&t.filtered.map((function(e){switch(e.id){case"id":a.id=Number(e.value)||0;break;default:a[e.id]={contains:e.value}}return null})),t&&t.sorted&&(n=[],t.sorted.map((function(e){return n.push(Object(z.a)({},e.id,e.desc?"desc":"asc")),null}))),"view"===this.state.mode&&(a.id?this.state.schema.modelSelectMultiple?T.a.includes(this.state.output,a.id)||(a.id=0):a.id!==this.state.output&&(a.id=0):a.id=this.state.output),e.next=6,N.a.callPageApi(this.pageInfo,this.state.schema.api,{sort:n,queryInput:JSON.stringify(a),limit:t.pageSize,skip:t.pageSize*t.page});case 6:(r=e.sent).data=this.calculateCheck(r.data,this.state.schema,this.state.output),this.setState({data:r.data,count:r.count,loading:!1,nPage:Math.ceil(r.count/t.pageSize)});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchItemName",value:function(){var e=Object(r.a)(l.a.mark((function e(t,a,n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a&&n){e.next=2;break}return e.abrupt("return");case 2:if(r={},a.modelSelectMultiple,r.id=n,!(n.length>0)){e.next=11;break}return e.next=7,N.a.callPageApi(t,a.api,{queryInput:JSON.stringify(r)});case 7:c=e.sent,this.setState({names:c.data}),e.next=12;break;case 11:this.setState({names:[]});case 12:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"calculateCheck",value:function(e,t,a){var n=[];return n=t.modelSelectMultiple?a:[a],e.map((function(e){return T.a.includes(n,e.id)?e.checked=!0:e.checked=!1})),e}},{key:"onRemoveClick",value:function(e){this.props.onItemRemoved&&this.props.onItemRemoved(e)}},{key:"onCheckboxChanged",value:function(e,t){var a=this.state.output;if(this.state.schema.modelSelectMultiple)if(Array.isArray(a)||(a=[]),t)T.a.includes(a,e.row.id)||(this.props.onItemAdded&&this.props.onItemAdded(e.row.id),a.push(e.row.id));else{for(var n=[],l=0;l<a.length;l++)a[l]===e.row.id?this.props.onItemRemoved&&this.props.onItemRemoved(l):n.push(a[l]);a=n}else a=t?e.row.id:null;var r=this.calculateCheck(this.state.data,this.state.schema,a);this.setState({data:r,output:a})}},{key:"onSelect",value:function(e){this.props.onItemGetValue&&this.props.onItemGetValue(e)}},{key:"calculateColumns",value:function(e){var t=this,a=[];return e.modelSelectField.split(",").map((function(e){var t=e.split("$$");return a.push({Header:t[1]||e,accessor:t[0]}),null})),a.push({Header:"Ch\u1ecdn",accessor:"checked",filterable:!1,Cell:function(e){var a=T.a.includes(t.state.output,e.row.id);return h.a.createElement("div",null,a?h.a.createElement("p",{className:"text-success"},"\u0110\xe3 ch\u1ecdn"):h.a.createElement(p.a,{color:"primary",type:"button",onClick:function(){t.onSelect(e.row.id)}},"Ch\u1ecdn"))}}),a}},{key:"onAddClick",value:function(){this.props.onItemAdded&&this.props.onItemAdded(),this.setState({modal:!this.state.modal,mode:"select"})}},{key:"confirm",value:function(){this.props.onChange&&this.props.onChange(this.state.output),this.toggle()}},{key:"render",value:function(){var e=this;return h.a.createElement("div",null,h.a.createElement(K.a,null,h.a.createElement("div",{className:"form-control select-container"},this.state.names.map((function(t,a){return t?h.a.createElement(ge.a,{size:"sm",key:a,className:"mr-2"},h.a.createElement(p.a,{color:"danger",type:"button",size:"sm",onClick:function(){e.onRemoveClick(t.id)}},h.a.createElement("i",{className:"fa fa-remove"})),h.a.createElement(p.a,{color:"default",type:"button",size:"sm"},t.name)):null}))),h.a.createElement(Q.a,{addonType:"append"},h.a.createElement(p.a,{disabled:this.props.disabled,type:"button",color:"primary",onClick:function(){e.onAddClick()}},h.a.createElement("i",{className:"fa fa-plus"})))),h.a.createElement(H.a,{isOpen:this.state.modal,fade:!1,size:"lg"},h.a.createElement(B.a,null,"Ch\u1ecdn"),h.a.createElement(G.a,null,h.a.createElement(L.a,{previousText:"Trang tr\u01b0\u1edbc",nextText:"Trang sau",pageText:"Trang",rowsText:"b\u1ea3n ghi",ofText:"tr\xean t\u1ed5ng s\u1ed1",data:this.state.data,loading:this.state.loading,manual:!0,filterable:!0,onFetchData:this.fetchData.bind(this),pages:this.state.nPage,columns:this.state.columns,defaultPageSize:this.itemsPerPage,className:"-striped -highlight"})),h.a.createElement(X.a,null,"select"===this.state.mode?h.a.createElement(h.a.Fragment,null,h.a.createElement(p.a,{color:"primary mr-1",onClick:this.confirm.bind(this)},"X\xe1c nh\u1eadn"),h.a.createElement(p.a,{color:"secondary",onClick:this.toggle.bind(this)},"H\u1ee7y b\u1ecf")):h.a.createElement(p.a,{color:"secondary",onClick:this.toggle.bind(this)},"\u0110\xf3ng"))))}}]),t}(m.Component),LocationWidget:pe,ModelSelectWidget:V,CheckboxWidget:U,ImageWidget:Y,RichTextWidget:ae,date:ie,UploadWidget:ue,EnumWidget:se,MultipleImageWidget:oe},ve=["default","primary","success","danger","info","warning"],fe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={currentItem:null,currentIndex:0},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data||[],apis:e.apis||[]})}},{key:"onPropertyClick",value:function(e){this.setState({pIndex:e})}},{key:"addItem",value:function(){var e=this.props.data.splice(0);e.push({}),this.onChange(e)}},{key:"onItemDataChanged",value:function(e,t){var a=this.props.data.splice(0);a[this.state.currentIndex][[e]]=t,this.onChange(a)}},{key:"deleteProperty",value:function(){var e=this.props.data.splice(0);e.splice(this.state.currentIndex,1);var t=this.state.currentIndex;--t<0&&(t=0),this.setState({currentIndex:t}),this.onChange(e)}},{key:"onChange",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=this.props.data[this.state.currentIndex];return h.a.createElement("div",null,h.a.createElement(E.a,{md:12},h.a.createElement("h5",{className:"card-title mb-0"},"Button"),h.a.createElement("div",{className:"small text-muted"},"Qu\u1ea3n l\xfd c\xe1c n\xfat b\u1ea5m trong form")),h.a.createElement(g.a,{className:"mt-1"},h.a.createElement(E.a,{md:2},h.a.createElement(P,{name:"N\xfat b\u1ea5m",items:this.props.data,renderItem:function(t,a){return h.a.createElement("div",{className:e.state.currentIndex===a?"item active":"item",onClick:function(){return e.setState({currentIndex:a})}},h.a.createElement("div",null,t.title||"Ch\u01b0a \u0111\u1eb7t t\xean",e.state.currentIndex===a?h.a.createElement("i",{className:"fa fa-pencil pull-right"}):null),h.a.createElement("span",{className:"small text-muted"},t.mode))},activeIndex:this.state.currentIndex,onChange:function(t){var a=t.items.splice(0);e.onChange(a),e.setState({currentIndex:t.activeIndex})},headerButtons:function(){return h.a.createElement(p.a,{color:"default",className:"pull-right",onClick:e.addItem.bind(e)},h.a.createElement("i",{className:"fa fa-plus"}))}})),h.a.createElement(E.a,{md:10},t?h.a.createElement(j.a,{hover:!0,className:"table-outline table-properties"},h.a.createElement("thead",{className:"thead-light"},h.a.createElement("tr",null,h.a.createElement("th",{colSpan:2},"Thu\u1ed9c t\xednh",h.a.createElement(p.a,{color:"danger",className:"pull-right",onClick:this.deleteProperty.bind(this)},h.a.createElement("i",{className:"fa fa-remove"})," X\xf3a")))),h.a.createElement("tbody",null,h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Ch\u1ebf \u0111\u1ed9")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.mode||"",type:"text",required:!0,onChange:function(t){e.onItemDataChanged("mode",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"T\xean")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.title||"",type:"text",required:!0,onChange:function(t){e.onItemDataChanged("title",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"M\xe0u n\xfat")),h.a.createElement("td",null,h.a.createElement(b.a,{type:"select",value:t.color||"",onChange:function(t){e.onItemDataChanged("color",t.target.value)}},ve.map((function(e,t){return h.a.createElement("option",{key:t,value:e},e)}))))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Bi\u1ec3u t\u01b0\u1ee3ng")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.icon||"",type:"text",required:!0,onChange:function(t){e.onItemDataChanged("icon",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Hi\u1ec3n th\u1ecb tr\xean c\u1ed9t")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.column||"",type:"text",required:!0,onChange:function(t){e.onItemDataChanged("column",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"\u0110i\u1ec1u ki\u1ec7n v\xf4 hi\u1ec7u h\xf3a")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.disableExpression||"",type:"text",required:!0,onChange:function(t){e.onItemDataChanged("disableExpression",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"\u0110i\u1ec1u ki\u1ec7n \u1ea9n")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.hideExpression||"",type:"text",required:!0,onChange:function(t){e.onItemDataChanged("hideExpression",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"\u0110i\u1ec1u ki\u1ec7n hi\u1ec3n th\u1ecb")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.condition||"",type:"text",required:!0,onChange:function(t){e.onItemDataChanged("condition",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"K\xedch ho\u1ea1t")),h.a.createElement("td",null,h.a.createElement(b.a,{type:"select",value:t.action||"",onChange:function(t){console.log("eeee",t.target.value),e.onItemDataChanged("action",t.target.value)}},h.a.createElement("option",{key:1,value:""},"Ch\u01b0a ch\u1ecdn"),h.a.createElement("option",{key:2,value:"api"},"G\u1ecdi h\xe0m"),h.a.createElement("option",{key:3,value:"url"},"Chuy\u1ec3n h\u01b0\u1edbng"),h.a.createElement("option",{key:3,value:"report"},"B\xe1o c\xe1o"),h.a.createElement("option",{key:3,value:"formModal"},"Popup")))),"formModal"===t.action?h.a.createElement(h.a.Fragment,null,h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"D\u1eef li\u1ec7u nh\xfang")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.modalQuery||"",type:"text",required:!0,onChange:function(t){e.onItemDataChanged("modalQuery",t.target.value)}})))):null,h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"G\u1ecdi h\xe0m")),h.a.createElement("td",null,h.a.createElement(b.a,{type:"select",value:t.api||"",onChange:function(t){e.onItemDataChanged("api",t.target.value)}},h.a.createElement("option",{key:-1,value:""},"Ch\u01b0a ch\u1ecdn"),this.props.apis.map((function(e,t){return h.a.createElement("option",{key:e.name,value:e.name},e.name)}))))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Xa\u0301c nh\xe2\u0323n")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.confirm||"",type:"text",required:!0,onChange:function(t){e.onItemDataChanged("confirm",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Quay l\u1ea1i sau khi submit")),h.a.createElement("td",null,h.a.createElement(Ee.CheckboxWidget,{value:t.backOnDone||!1,onChange:function(t){e.onItemDataChanged("backOnDone",t)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Nhu\u0301ng d\u01b0\u0303 li\xea\u0323u URL")),h.a.createElement("td",null,h.a.createElement(Ee.CheckboxWidget,{value:t.embedUrl||!1,onChange:function(t){e.onItemDataChanged("embedUrl",t)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Chuy\u1ec3n h\u01b0\u1edbng")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.url||"",type:"text",required:!0,onChange:function(t){e.onItemDataChanged("url",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Ki\u1ec3u n\xfat")),h.a.createElement("td",null,h.a.createElement(b.a,{type:"select",value:t.type||"",onChange:function(t){e.onItemDataChanged("type",t.target.value)}},h.a.createElement("option",{key:1,value:""},"Ch\u01b0a ch\u1ecdn"),h.a.createElement("option",{key:2,value:"button"},"button"),h.a.createElement("option",{key:3,value:"submit"},"submit"),h.a.createElement("option",{key:3,value:"switch"},"switch")))))):null)))}}]),t}(m.Component),Ce=["string","number","date","boolean"],ye=["image"],be=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={data:a.props.data||[],apis:a.props.apis||[],currentItem:null,currentIndex:0,error:null},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data||[],apis:e.apis||[]})}},{key:"onPropertyClick",value:function(e){this.setState({pIndex:e})}},{key:"onChange",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"addItem",value:function(){var e=this.props.data.splice(0);e.push({}),this.onChange(e)}},{key:"onItemDataChanged",value:function(e,t){var a=this.props.data.splice(0);a[this.state.currentIndex][[e]]=t,this.onChange(a)}},{key:"deleteProperty",value:function(){var e=this.props.data.splice(0);e.splice(this.state.currentIndex,1);var t=this.state.currentIndex;--t<0&&(t=0),this.setState({currentIndex:t}),this.onChange(e)}},{key:"render",value:function(){var e=this,t=this.props.data[this.state.currentIndex];return h.a.createElement("div",null,h.a.createElement(E.a,{md:12},h.a.createElement("h5",{className:"card-title mb-0"},"Grid",this.props.onSave?h.a.createElement(p.a,{className:"pull-right",type:"submit",size:"md",onClick:this.save.bind(this)},h.a.createElement("i",{className:"fa fa-pencil"})," X\xe1c nh\u1eadn"):null),h.a.createElement("div",{className:"small text-muted"},"Qu\u1ea3n l\xfd hi\u1ec3n th\u1ecb b\u1ea3ng d\u1eef li\u1ec7u")),h.a.createElement(g.a,{className:"mt-1"},h.a.createElement(E.a,{md:2},h.a.createElement(P,{name:"C\u1ed9t",items:this.props.data,renderItem:function(t,a){return h.a.createElement("div",{className:e.state.currentIndex===a?"item active":"item",onClick:function(){return e.setState({currentIndex:a})}},h.a.createElement("div",null,t.name||"Ch\u01b0a \u0111\u1eb7t t\xean",e.state.currentIndex===a?h.a.createElement("i",{className:"fa fa-pencil pull-right"}):null),h.a.createElement("span",{className:"small text-muted"},t.field))},activeIndex:this.state.currentIndex,onChange:function(t){var a=t.items.splice(0);e.onChange(a),e.setState({currentIndex:t.activeIndex})},headerButtons:function(){return h.a.createElement(p.a,{color:"default",className:"pull-right",onClick:e.addItem.bind(e)},h.a.createElement("i",{className:"fa fa-plus"}))}})),h.a.createElement(E.a,{md:10},t?h.a.createElement(j.a,{hover:!0,className:"table-outline table-properties"},h.a.createElement("thead",{className:"thead-light"},h.a.createElement("tr",null,h.a.createElement("th",{colSpan:2},"Thu\u1ed9c t\xednh",h.a.createElement(p.a,{color:"danger",className:"pull-right",onClick:this.deleteProperty.bind(this)},h.a.createElement("i",{className:"fa fa-remove"})," X\xf3a")))),h.a.createElement("tbody",null,h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"T\xean")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.name||"",type:"text",required:!0,onChange:function(t){e.onItemDataChanged("name",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"\u0110\u1ed9 r\u1ed9ng")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.width||"",type:"number",required:!0,onChange:function(t){e.onItemDataChanged("width",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Tr\u01b0\u1eddng d\u1eef li\u1ec7u")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.field||"",type:"text",required:!0,onChange:function(t){e.onItemDataChanged("field",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Ki\u1ec3u d\u1eef li\u1ec7u")),h.a.createElement("td",null,h.a.createElement(b.a,{type:"select",value:t.type||"",onChange:function(t){e.onItemDataChanged("type",t.target.value)}},h.a.createElement("option",{key:-1,value:""},"Ch\u01b0a ch\u1ecdn"),Ce.map((function(e,t){return h.a.createElement("option",{key:t,value:e},e)}))))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Danh sa\u0301ch co\u0301 s\u0103\u0303n")),h.a.createElement("td",null,h.a.createElement(Ee.CheckboxWidget,{value:t.enumable||!1,onChange:function(t){e.onItemDataChanged("enumable",t)}}))),t.enumable?h.a.createElement(h.a.Fragment,null,h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"C\xe1c l\u1ef1a ch\u1ecdn")),h.a.createElement("td",null,h.a.createElement(q,{value:t.items||[],onChange:function(t){e.onItemDataChanged("items",t)}})))):null,h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Danh s\xe1ch ch\u1ecdn csdl")),h.a.createElement("td",null,h.a.createElement(Ee.CheckboxWidget,{value:t.modelSelect||!1,onChange:function(t){e.onItemDataChanged("modelSelect",t)}}))),t.modelSelect?h.a.createElement(h.a.Fragment,null,h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"H\xe0m xem danh s\xe1ch")),h.a.createElement("td",null,h.a.createElement(b.a,{type:"select",value:t.modelSelectApi||"",onChange:function(t){e.onItemDataChanged("modelSelectApi",t.target.value)}},h.a.createElement("option",{key:-1,value:""},"Ch\u01b0a ch\u1ecdn"),this.props.apis.map((function(e,t){return h.a.createElement("option",{key:e.name,value:e.name},e.name)})))))):null,h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Hi\u1ec3n th\u1ecb")),h.a.createElement("td",null,h.a.createElement(b.a,{type:"select",value:t.display||"",onChange:function(t){e.onItemDataChanged("display",t.target.value)}},h.a.createElement("option",{key:-1,value:""},"Ch\u01b0a ch\u1ecdn"),ye.map((function(e,t){return h.a.createElement("option",{key:t,value:e},e)}))))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Cho ph\xe9p l\u1ecdc")),h.a.createElement("td",null,h.a.createElement(Ee.CheckboxWidget,{value:t.filterable||!1,onChange:function(t){e.onItemDataChanged("filterable",t)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"L\u1ecdc b\u1eaft bu\u1ed9c")),h.a.createElement("td",null,h.a.createElement(Ee.CheckboxWidget,{value:t.required||!1,onChange:function(t){e.onItemDataChanged("required",t)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"T\xecm ki\u1ebfm ch\xednh x\xe1c")),h.a.createElement("td",null,h.a.createElement(Ee.CheckboxWidget,{value:t.accurate||!1,onChange:function(t){e.onItemDataChanged("accurate",t)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"N\xfat b\u1ea5m thay th\u1ebf")),h.a.createElement("td",null,h.a.createElement(Ee.CheckboxWidget,{value:t.bindButton||!1,onChange:function(t){e.onItemDataChanged("bindButton",t)}}))),t.filterable?h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"T\xecm theo kho\u1ea3ng")),h.a.createElement("td",null,h.a.createElement(Ee.CheckboxWidget,{value:t.filterRange||!1,onChange:function(t){e.onItemDataChanged("filterRange",t)}}))):null)):null)))}}]),t}(m.Component),ke={string:["Text","TextArea","Image","Location","RichText","ArrayImage","Password","Captcha","Explain","Enum"],boolean:["Checkbox"],number:["Text","Date","Time","Enum","SingleModel","ArrayModel","Upload","NumberMask"]},xe=["string","number","boolean"],Ie=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={currentIndex:0},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"onPropertyClick",value:function(e){this.setState({currentIndex:e})}},{key:"onPropertyDataChange",value:function(e,t){var a=this.props.schema.splice(0);a[this.state.currentIndex][e]=t,this.onChange(a)}},{key:"addItem",value:function(){var e=this.props.schema.splice(0);e.push({}),this.onChange(e)}},{key:"deleteProperty",value:function(){var e=this.props.schema.splice(0);e.splice(this.state.currentIndex,1),this.onChange(e)}},{key:"onChange",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=this.props.schema[this.state.currentIndex];return h.a.createElement("div",null,h.a.createElement(E.a,{md:12},h.a.createElement("h5",{className:"card-title mb-0"},"Form",this.props.onSave?h.a.createElement(p.a,{className:"pull-right",type:"submit",size:"md",onClick:this.save.bind(this)},h.a.createElement("i",{className:"fa fa-pencil"})," X\xe1c nh\u1eadn"):null),h.a.createElement("div",{className:"small text-muted"},"Qu\u1ea3n l\xfd form")),h.a.createElement(g.a,{className:"mt-1"},h.a.createElement(E.a,{md:2},h.a.createElement(P,{name:"Thu\u1ed9c t\xednh",items:this.props.schema,renderItem:function(t,a){return h.a.createElement("div",{className:e.state.currentIndex===a?"item active":"item",onClick:function(){return e.setState({currentIndex:a})}},h.a.createElement("div",null,t.name||"Ch\u01b0a \u0111\u1eb7t t\xean","  ",t.required?"*":""," ",e.state.currentIndex===a?h.a.createElement("i",{className:"fa fa-pencil pull-right"}):null),h.a.createElement("span",{className:"small text-muted"},t.field))},activeIndex:this.state.currentIndex,onChange:function(t){var a=T.a.clone(t.items);e.onChange(a),e.setState({schema:a,currentIndex:t.activeIndex})},headerButtons:function(){return h.a.createElement(p.a,{color:"default",className:"pull-right",onClick:e.addItem.bind(e)},h.a.createElement("i",{className:"fa fa-plus"}))}})),h.a.createElement(E.a,{md:10},t?h.a.createElement(j.a,{hover:!0,className:"table-outline table-properties"},h.a.createElement("thead",{className:"thead-light"},h.a.createElement("tr",null,h.a.createElement("th",{colSpan:2},"Thu\u1ed9c t\xednh ",h.a.createElement(p.a,{color:"danger",className:"pull-right",onClick:this.deleteProperty.bind(this)},h.a.createElement("i",{className:"fa fa-remove"})," X\xf3a")))),h.a.createElement("tbody",null,h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"T\xean")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.name||"",type:"text",placeholder:"T\xean",required:!0,onChange:function(t){e.onPropertyDataChange("name",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Tr\u01b0\u1eddng d\u1eef li\u1ec7u")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.field||"",type:"text",placeholder:"Tr\u01b0\u1eddng d\u1eef li\u1ec7u",required:!0,onChange:function(t){e.onPropertyDataChange("field",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Ki\u1ec3u d\u1eef li\u1ec7u")),h.a.createElement("td",null,h.a.createElement(b.a,{type:"select",value:t.type||"",onChange:function(t){e.onPropertyDataChange("type",t.target.value)}},h.a.createElement("option",{key:-1,value:""},"Ch\u01b0a ch\u1ecdn"),xe.map((function(e,t){return h.a.createElement("option",{key:t,value:e},e)}))))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"H\u01b0\u1edbng d\u1eabn")),h.a.createElement("td",null,h.a.createElement(b.a,{type:"textarea",value:t.intro||"",onChange:function(t){e.onPropertyDataChange("intro",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Tr\u01b0\u01a1\u0300ng b\u0103\u0301t bu\xf4\u0323c")),h.a.createElement("td",null,h.a.createElement(Ee.CheckboxWidget,{value:t.required||!1,onChange:function(t){e.onPropertyDataChange("required",t)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"V\xf4 hi\u1ec7u h\xf3a")),h.a.createElement("td",null,h.a.createElement(Ee.CheckboxWidget,{value:t.disabled||!1,onChange:function(t){e.onPropertyDataChange("disabled",t)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Ki\u1ec3u giao di\u1ec7n")),h.a.createElement("td",null,h.a.createElement(b.a,{type:"select",value:t.widget||"",onChange:function(t){e.onPropertyDataChange("widget",t.target.value)}},h.a.createElement("option",{key:-1,value:""},"Ch\u01b0a ch\u1ecdn"),(ke[t.type]||[]).map((function(e,t){return h.a.createElement("option",{key:t,value:e},e)}))))),"Image"===t.widget||"ArrayImage"===t.widget?h.a.createElement(h.a.Fragment,null,h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Chi\u1ec1u r\u1ed9ng (width)")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.imageWidth,type:"text",required:!0,onChange:function(t){e.onPropertyDataChange("imageWidth",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Chi\u1ec1u cao (height)")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.imageHeight,type:"text",required:!0,onChange:function(t){e.onPropertyDataChange("imageHeight",t.target.value)}})))):null,"Enum"===t.widget?h.a.createElement(h.a.Fragment,null,h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"C\xe1c l\u1ef1a ch\u1ecdn")),h.a.createElement("td",null,h.a.createElement(q,{value:t.items,onChange:function(t){e.onPropertyDataChange("items",t)}})))):null,"SingleModel"===t.widget||"ArrayModel"===t.widget?h.a.createElement(h.a.Fragment,null,h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"H\xe0m l\u1ea5y d\u1eef li\u1ec7u ch\u1ecdn")),h.a.createElement("td",null,h.a.createElement(b.a,{type:"select",value:t.api,onChange:function(t){e.onPropertyDataChange("api",t.target.value)}},h.a.createElement("option",{key:-1,value:""},"Ch\u01b0a ch\u1ecdn"),this.props.apis.map((function(e,t){return h.a.createElement("option",{key:e.name,value:e.name},e.name)}))))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Ch\u1ecdn nhi\u1ec1u gi\xe1 tr\u1ecb")),h.a.createElement("td",null,h.a.createElement(Ee.CheckboxWidget,{value:t.modelSelectMultiple,onChange:function(t){e.onPropertyDataChange("modelSelectMultiple",t)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"Hi\u1ec3n th\u1ecb c\xe1c tr\u01b0\u1eddng d\u1eef li\u1ec7u")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.modelSelectField,type:"text",placeholder:"Ti\xeau \u0111\u1ec1",required:!0,onChange:function(t){e.onPropertyDataChange("modelSelectField",t.target.value)}})))):null,h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"\u0110i\u1ec1u ki\u1ec7n \u1ea9n")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.hideExpression,type:"text",placeholder:"\u0110i\u1ec1u ki\u1ec7n \u1ea9n",required:!0,onChange:function(t){e.onPropertyDataChange("hideExpression",t.target.value)}}))),h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(y.a,null,"M\u1eb7c \u0111\u1ecbnh")),h.a.createElement("td",null,h.a.createElement(b.a,{value:t.default||"",type:"text",placeholder:"Gi\xe1 tr\u1ecb m\u1eb7c \u0111\u1ecbnh",required:!0,onChange:function(t){e.onPropertyDataChange("default",t.target.value)}}))))):null)))}}]),t}(m.Component),Se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).page=null,a.state={activeTab:1,schema:[],data:{},apis:[],buttons:[],pageData:null,name:"",desc:"",read:"",pageInfo:null,roles:[]},a.query=_.a.parse(a.props.location.search,{ignoreQueryPrefix:!0}),a.loadData(),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"loadData",value:function(){var e=Object(r.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.getPage(4);case 2:if(this.pageInfo=e.sent,console.log("PAGE INFO",this.pageInfo),"edit"!==this.query.mode){e.next=11;break}if(this.query.id){e.next=7;break}return e.abrupt("return",this.setState({error:"Kh\xf4ng c\xf3 th\xf4ng tin \u0111\u1ec3 t\u1ea3i d\u1eef li\u1ec7u"}));case 7:return e.next=9,N.a.callPageApi(this.pageInfo,this.pageInfo.read,{queryInput:JSON.stringify({id:this.query.id})});case 9:t=e.sent,this.setState({schema:t.data[0].schema,roles:t.data[0].roles,form:t.data[0].form,name:t.data[0].name,desc:t.data[0].desc,apis:t.data[0].apis||[],read:t.data[0].read,buttons:t.data[0].buttons,grid:t.data[0].grid});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){this.query=_.a.parse(e.location.search,{ignoreQueryPrefix:!0}),this.loadData()}},{key:"saveData",value:function(){var e=Object(r.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:this.state.name,desc:this.state.desc,apis:this.state.apis,read:this.state.read,buttons:this.state.buttons,grid:this.state.grid,id:this.query.id,roles:this.state.roles,schema:this.state.schema},e.next=3,N.a.callPageApi(this.pageInfo,"update",t);case 3:N.a.alert("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createPage",value:function(){var e=Object(r.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:this.state.name,desc:this.state.desc,apis:this.state.apis,read:this.state.read,buttons:this.state.buttons,grid:this.state.grid,schema:this.state.schema,roles:this.state.roles},e.next=3,N.a.callPageApi(this.pageInfo,"create",t);case 3:N.a.alert("T\u1ea1o m\u1edbi th\xe0nh c\xf4ng");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleTab",value:function(e){this.setState({activeTab:e})}},{key:"render",value:function(){var e=this,t=null;switch(this.query.mode){case"create":t=h.a.createElement(d.a,null,h.a.createElement("h3",{className:"pull-left"},"T\u1ea1o trang m\u1edbi"),h.a.createElement(p.a,{className:"pull-right",type:"submit",size:"md",color:"success",onClick:this.createPage.bind(this)},h.a.createElement("i",{className:"fa fa-check"})," T\u1ea1o m\u1edbi"));break;case"edit":t=h.a.createElement(d.a,null,h.a.createElement("h3",{className:"pull-left"},"S\u1eeda th\xf4ng tin trang"),h.a.createElement(p.a,{className:"pull-right ml-1",type:"submit",size:"md",color:"primary",onClick:this.saveData.bind(this)},h.a.createElement("i",{className:"fa fa-check"})," L\u01b0u th\xf4ng tin"),h.a.createElement(p.a,{className:"pull-right",type:"submit",size:"md",color:"success",onClick:this.createPage.bind(this)},h.a.createElement("i",{className:"fa fa-copy"})," Sao ch\xe9p"))}return h.a.createElement(g.a,null,h.a.createElement(E.a,{md:12},h.a.createElement(v.a,null,t,h.a.createElement(f.a,null,h.a.createElement(g.a,null,h.a.createElement(E.a,{md:3},h.a.createElement(C.a,null,h.a.createElement(y.a,null,"T\xean trang"),h.a.createElement(b.a,{value:this.state.name,type:"text",placeholder:"Ti\xeau \u0111\u1ec1",required:!0,onChange:function(t){e.setState({name:t.target.value})}}))),h.a.createElement(E.a,{md:3},h.a.createElement(C.a,null,h.a.createElement(y.a,null,"M\xf4 t\u1ea3"),h.a.createElement(b.a,{value:this.state.desc,type:"text",placeholder:"Nh\u1eadp m\xf4 t\u1ea3 trang",required:!0,onChange:function(t){e.setState({desc:t.target.value})}}))),h.a.createElement(E.a,{md:3},h.a.createElement(C.a,null,h.a.createElement(y.a,null,"H\xe0m t\u1ea3i d\u1eef li\u1ec7u"),h.a.createElement(b.a,{type:"select",value:this.state.read,onChange:function(t){e.setState({read:t.target.value})}},h.a.createElement("option",{key:-1,value:""},"Ch\u01b0a ch\u1ecdn"),this.state.apis.map((function(e,t){return h.a.createElement("option",{key:t,value:e.name},e.name)}))))),h.a.createElement(E.a,{md:3},h.a.createElement(C.a,null,h.a.createElement(y.a,null,"Ph\xe2n quy\u1ec1n"),h.a.createElement(M.a.ArrayModel,{schema:{pageId:4,modelSelectField:"id,name",api:"find_role"},value:this.state.roles,onChange:function(t){e.setState({roles:t})}})))),h.a.createElement(k.a,{tabs:!0},h.a.createElement(x.a,null,h.a.createElement(I.a,{active:1===this.state.activeTab,onClick:function(){e.toggleTab(1)}},"Form")),h.a.createElement(x.a,null,h.a.createElement(I.a,{active:2===this.state.activeTab,onClick:function(){e.toggleTab(2)}},"Button")),h.a.createElement(x.a,null,h.a.createElement(I.a,{active:3===this.state.activeTab,onClick:function(){e.toggleTab(3)}},"API")),h.a.createElement(x.a,null,h.a.createElement(I.a,{active:4===this.state.activeTab,onClick:function(){e.toggleTab(4)}},"Grid")),h.a.createElement(x.a,null,h.a.createElement(I.a,{active:5===this.state.activeTab,onClick:function(){e.toggleTab(5)}},"Form JSON"))),h.a.createElement(S.a,{activeTab:this.state.activeTab},h.a.createElement(O.a,{tabId:1},h.a.createElement(Ie,{apis:this.state.apis,schema:this.state.schema,onChange:function(t){e.setState({schema:t})}})),h.a.createElement(O.a,{tabId:2},h.a.createElement(fe,{data:this.state.buttons||[],apis:this.state.apis,onChange:function(t){e.setState({buttons:t})}})),h.a.createElement(O.a,{tabId:3},h.a.createElement(R,{data:this.state.apis||[],onChange:function(t){e.setState({apis:t})}})),h.a.createElement(O.a,{tabId:4},h.a.createElement(be,{data:this.state.grid||[],apis:this.state.apis,onChange:function(t){e.setState({grid:t})}})),h.a.createElement(O.a,{tabId:5},h.a.createElement("p",null,"T\u1ea1m \u0111\xf3ng")))))))}}]),t}(m.Component);t.default=Se}}]);