(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[13],{790:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return D}));var n=a(51),l=a(8),r=a.n(l),c=a(16),i=a(10),s=a(11),o=a(13),u=a(12),h=a(14),m=a(0),d=a.n(m),p=a(72),g=a.n(p),v=a(170),E=a(85),f=a(84),y=a(707),T=a(708),b=a(709),C=a(711),S=a(710),w=a(732),k=a(726),x=a(727),M=a(50),H=a(15),I=a(120),O=a(123),P=a.n(O),j=a(78),D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).query=g.a.parse(e.location.search,{ignoreQueryPrefix:!0}),a.state={loading:!1,phone:"",userInfo:null,histories:[],activeTab:"1",currentModal:null,isShowModal:!1,modalQuery:null},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({pageInfo:null}),this.setState({listprovince:[]}),this.setState({listcategory:[]}),e.next=5,H.a.getPage(this.query.page);case 5:return t=e.sent,this.setState({pageInfo:t}),e.next=9,H.a.callPageApi(this.state.pageInfo,"get-provinces",{skip:0,limit:1e3});case 9:return a=e.sent,this.setState({listprovince:a.data},(function(){})),e.next=13,H.a.callPageApi(this.state.pageInfo,"get-categories",{});case 13:n=e.sent,this.setState({listcategory:n.data},(function(){})),console.log("PAGE INFO",t);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({loading:!0}),e.next=4,H.a.callPageApi(this.state.pageInfo,"search-voucher",this.state);case 4:a=e.sent,this.setState({data:a.data,count:a.count,loading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggle",value:function(e){this.setState({activeTab:e})}},{key:"handleChange",value:function(e){console.log("handle evt",e.target);var t=e.target,a=t.name,l=t.value;this.setState(Object(n.a)({},a,l))}},{key:"showModal",value:function(e,t){this.setState({isShowModal:!0,currentModal:e,modalQuery:t})}},{key:"render",value:function(){var e=this;return this.state.loading?d.a.createElement(M.a,null):d.a.createElement(v.a,null,d.a.createElement(E.a,{md:12},d.a.createElement(w.a,{isOpen:this.state.isShowModal,fade:!1,size:"lg",backdrop:!0,toggle:function(){e.setState({isShowModal:!1})}},d.a.createElement(k.a,null,this.state.currentModal&&this.state.isShowModal?d.a.createElement(this.state.currentModal,{query:this.state.modalQuery}):d.a.createElement(M.a,null)),d.a.createElement(x.a,null,d.a.createElement(f.a,{color:"secondary",onClick:function(){e.setState({isShowModal:!1})}},"\u0110\xf3ng")))),d.a.createElement(E.a,{md:"12"},d.a.createElement(y.a,null,d.a.createElement(T.a,null,d.a.createElement(b.a,null,d.a.createElement("h3",null,"Tra c\u1ee9u th\xf4ng tin voucher"),d.a.createElement("form",{onSubmit:this.search.bind(this)},d.a.createElement(v.a,null,d.a.createElement(E.a,{md:3},d.a.createElement(C.a,null,"T\xean voucher"),d.a.createElement(S.a,{type:"text",name:"voucher",value:this.state.voucher,onChange:this.handleChange.bind(this)})),d.a.createElement(E.a,{md:3},d.a.createElement(C.a,null,"T\xean \u0111\u1ed1i t\xe1c"),d.a.createElement(S.a,{type:"text",name:"partner",value:this.state.partner,onChange:this.handleChange.bind(this)})),d.a.createElement(E.a,{md:3},d.a.createElement(C.a,null,"L\u0129nh v\u1ef1c"),d.a.createElement(S.a,{type:"select",name:"category",value:this.state.category,onChange:this.handleChange.bind(this)},d.a.createElement("option",{value:""},"T\u1ea5t c\u1ea3"),this.state.listcategory?this.state.listcategory.map((function(e){return d.a.createElement("option",{value:e.id},e.name)})):"")),d.a.createElement(E.a,{md:3},d.a.createElement(C.a,null,"T\xecnh tr\u1ea1ng"),d.a.createElement(S.a,{type:"select",name:"useTime",value:this.state.useTime,onChange:this.handleChange.bind(this)},d.a.createElement("option",{value:0},"T\u1ea5t c\u1ea3"),d.a.createElement("option",{value:1},"C\xf2n h\u1ea1n"),d.a.createElement("option",{value:2},"H\u1ebft h\u1ea1n"))),d.a.createElement(E.a,{md:3},d.a.createElement(C.a,null,"Hot"),d.a.createElement(S.a,{type:"select",name:"hot",value:this.state.hot,onChange:this.handleChange.bind(this)},d.a.createElement("option",{value:0},"T\u1ea5t c\u1ea3"),d.a.createElement("option",{value:1},"Kh\xf4ng hot"),d.a.createElement("option",{value:2},"Hot"))),d.a.createElement(E.a,{md:3},d.a.createElement(C.a,null,"T\u1ec9nh"),d.a.createElement(S.a,{type:"select",name:"province",value:this.state.province,onChange:this.handleChange.bind(this)},d.a.createElement("option",{value:100},"To\xe0n qu\u1ed1c"),this.state.listprovince?this.state.listprovince.map((function(e){if(100!==e.id)return d.a.createElement("option",{value:e.id},e.name)})):"")),d.a.createElement(E.a,{md:3},d.a.createElement(C.a,null,"Tr\u1ea1ng th\xe1i"),d.a.createElement(S.a,{type:"select",name:"state",value:this.state.state,onChange:this.handleChange.bind(this)},d.a.createElement("option",{value:0},"T\u1ea5t c\u1ea3"),d.a.createElement("option",{value:1},"\u0110\xe3 t\u1eaft"),d.a.createElement("option",{value:2},"\u0110ang b\u1eadt"))),d.a.createElement(E.a,{md:3},d.a.createElement(C.a,null,"T\xecm ki\u1ebfm"),d.a.createElement(f.a,{color:"primary",block:!0,className:"mt-1"},d.a.createElement("i",{className:"fa fa-search"})," T\xecm ki\u1ebfm")))),d.a.createElement("div",{className:"mt-2"},d.a.createElement("p",null,this.state.count," k\u1ebft qu\u1ea3"),this.state.data?d.a.createElement(I.a,{previousText:"Trang tr\u01b0\u1edbc",nextText:"Trang sau",pageText:"Trang",rowsText:"b\u1ea3n ghi",ofText:"tr\xean t\u1ed5ng s\u1ed1",data:this.state.data,showPageJump:!0,pages:Math.ceil(this.state.data.length/20),columns:[{Header:"ID",accessor:"voucherId",width:70},{Header:"T\u1ec9nh",accessor:"province",width:100,Cell:function(t){return e.state.listprovince.map((function(e){if(e.id===t.original.province)return e.name}))}},{Header:"Gi\xe1 tr\u1ecb",accessor:"value",width:100},{Header:"Th\u01b0\u01a1ng hi\u1ec7u",accessor:"partner",width:200},{Header:"Voucher",accessor:"voucher",width:500,Cell:function(t){return d.a.createElement("a",{href:"",onClick:function(a){a.preventDefault(),console.log("here"),e.showModal(j.a,{voucher:t.original.voucherId,type:1})}},t.value)}},{Header:"L\u0129nh v\u1ef1c",accessor:"category"},{Header:"S\u1ed1 \u0111i\u1ec3m \u0111\u1ed5i",accessor:"exchangePoint"},{Header:"Hot",accessor:"hot",Cell:function(e){return d.a.createElement("span",null,1===e.value?"Hot":"Kh\xf4ng")}},{Header:"Tr\u1ea1ng th\xe1i",accessor:"state",Cell:function(e){return d.a.createElement("span",null,1===e.value?"\u0110ang b\u1eadt":"\u0110\xe3 t\u1eaft")}},{Header:"Ng\xe0y h\u1ebft h\u1ea1n",accessor:"endDate",Cell:function(e){return d.a.createElement("span",null,d.a.createElement(P.a,{format:"DD/MM/YYYY hh:mm"},e.value))}}],defaultPageSize:20,className:"-striped -highlight data-table",loadingText:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u..."}):d.a.createElement("p",null,"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u")))))))}}]),t}(m.Component)}}]);