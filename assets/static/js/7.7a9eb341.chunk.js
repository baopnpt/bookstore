(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[7],{743:function(e,t){},778:function(e,t){},779:function(e,t){},788:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a.n(n),o=a(16),l=a(10),s=a(11),c=a(13),i=a(12),u=a(14),h=a(0),d=a.n(h),p=a(708),g=a(735),f=a(709),v=a(15),m=a(120),y=a(27),C=a(72),b=a.n(C),x=a(768),T=a.n(x),D=a(98),E=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).pageId=48,a.state={voucherCategoryMap:{data:[]},columns:[],dataDealOnline:[],dataAllDeal:[],dataToDownload:[],alldeal:!1,filtered:[]},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,a=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getPage(this.pageId);case 2:return this.pageInfo=e.sent,console.log("PAGE INFO",this.pageInfo),e.next=6,v.a.callPageApi(this.pageInfo,this.pageInfo.read,{});case 6:t=e.sent,this.setState({voucherCategoryMap:{data:[]},columns:this.createVoucherCategoryColumns(t.report.categories),dataDealOnline:t.report.voucherCategoryMapDealOnline,dataAllDeal:t.report.voucherCategoryMapAllDeal},(function(){a.state.alldeal?a.setState({voucherCategoryMap:{data:a.state.dataAllDeal}}):a.setState({voucherCategoryMap:{data:a.state.dataDealOnline}})}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"convert",value:function(e){for(var t=this.selectTable.getResolvedState().sortedData,a=[],n=0;n<t.length;n++){for(var r={},o=0;o<this.state.columns.length;o++)r[this.state.columns[o].Header]=t[n][this.state.columns[o].accessor];a.push(r)}this.setState({dataToDownload:a},(function(){}))}},{key:"createVoucherCategoryColumns",value:function(e){var t=[{Header:"T\u1ec9nh",accessor:"T\u1ec9nh"},{Header:"Huy\u1ec7n",accessor:"Huy\u1ec7n"}];return e.map((function(e){return t.push({Header:e.name,accessor:e.name}),null})),t}},{key:"handleSwitchChange",value:function(){var e=this;this.setState({alldeal:!this.state.alldeal},(function(){e.state.alldeal?e.setState({voucherCategoryMap:{data:e.state.dataAllDeal}}):e.setState({voucherCategoryMap:{data:e.state.dataDealOnline}})})),this.setState({filtered:[]})}},{key:"render",value:function(){var e=this,t={page:this.pageId,api:"voucherCategoryProvince",accesstoken:y.a.get("session"),exportExcel:!0,queryInput:JSON.stringify({exportExcel:!0})};"".concat(window.host,"/api/report/voucher-category-province?").concat(b.a.stringify(t));return d.a.createElement("div",{className:"animated fadeIn"},d.a.createElement("div",{className:"d-flex"},d.a.createElement("h4",null,"T\u1ea5t c\u1ea3 voucher trong h\u1ec7 th\u1ed1ng:\xa0\xa0\xa0"),d.a.createElement(D.a,{value:this.state.alldeal,onChange:function(){return e.handleSwitchChange(e.state.alldeal)}})),d.a.createElement(p.a,null,d.a.createElement(g.a,null,d.a.createElement("h3",null,"B\xe1o c\xe1o \u0111\u1ed9 ph\u1ee7",d.a.createElement(T.a,{filename:"report.xlsx",element:d.a.createElement("button",{className:"pull-right btn btn-info mr-1"},"Xu\u1ea5t b\xe1o c\xe1o")},d.a.createElement(T.a.Sheet,{data:this.state.dataToDownload.length>0?this.state.dataToDownload:this.state.voucherCategoryMap.data,name:"B\xe1o c\xe1o \u0111\u1ed9 ph\u1ee7"},this.state.columns.map((function(e){return d.a.createElement(T.a.Column,{label:e.Header,value:function(t){return 0!==t[e.accessor]?String(t[e.accessor]):"0"}})})))))),d.a.createElement(f.a,null,d.a.createElement(m.a,{ref:function(t){e.selectTable=t},onFilteredChange:function(t){e.setState({filtered:t}),e.convert()},filterable:!0,filtered:this.state.filtered,defaultFilterMethod:function(e,t,a){var n=e.pivotId||e.id;return"object"===typeof e.value?void 0===t[n]||e.value.indexOf(t[n])>-1:void 0===t[n]||String(t[n]).toLowerCase().indexOf(e.value.toLowerCase())>-1},previousText:"Trang tr\u01b0\u1edbc",nextText:"Trang sau",pageText:"Trang",rowsText:"b\u1ea3n ghi",ofText:"tr\xean t\u1ed5ng s\u1ed1",data:this.state.voucherCategoryMap.data,loading:this.state.loading,pages:this.state.nPage,columns:this.state.columns,className:"-striped -highlight data-table"}))))}}]),t}(h.Component);t.default=E}}]);